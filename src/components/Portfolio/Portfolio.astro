---
import { getCollection } from 'astro:content';
import ProjectPreview from './ProjectPreview.astro';
import SectionTitle from '../../components/SectionTitle.astro';
import { sortProjectsByLeadingNumberAsc } from '../../utils/data-utils';
import { getSiteLocaleConfig } from '../../data/site-config';
import { type Locale } from '../../utils/i18n';

type Props = {
  locale: Locale;
};

const { locale } = Astro.props as Props;
const site = getSiteLocaleConfig(locale);
const projects = (await getCollection('projects', (entry) => entry.data.locale === locale)).sort(sortProjectsByLeadingNumberAsc);
const featuredProjects = projects.filter(({ data }) => data.isFeatured);
const title = site.portfolio.title;
---

<section class="Portfolio" id="portfolio" aria-label={title}>
  <SectionTitle title={title || 'Портфолио'} />

  <div class="Portfolio__Grid">
    {featuredProjects.map((project) => <ProjectPreview project={project} headingLevel="h3" locale={locale} />)}
  </div>
</section>

<style lang="scss">
  .Portfolio {
    &__Grid {
      display: grid;
      gap: var(--space-24);
      grid-template-columns: repeat(2, 1fr);

      @media (max-width: 1200px) {
        grid-template-columns: repeat(2, 1fr);
      }
      @media (max-width: 700px) {
        grid-template-columns: 1fr;
      }
    }
  }
</style>


