---
import { getCollection } from 'astro:content';
import { sortProjectsByLeadingNumberAsc } from '../../utils/data-utils';
import siteConfig from '../../data/site-config';

import ProjectPreview from './ProjectPreview.astro';
import SectionTitle from '../../components/SectionTitle.astro';

const projects = (await getCollection('projects')).sort(sortProjectsByLeadingNumberAsc);
const featuredProjects = projects.filter(({ data }) => data.isFeatured);

const { title } = siteConfig.portfolio || {};

interface Portfolio {
  title: string;
}
---

<section class="portfolio" id="portfolio" aria-label={title}>
  <SectionTitle title={title || 'Портфолио'} />

  <div class="portfolio__grid">
    {featuredProjects.map((project) => <ProjectPreview project={project} headingLevel="h3" />)}
  </div>
</section>

<style lang="scss">
  .portfolio {
    &__grid {
      display: grid;
      gap: var(--space-24);
      grid-template-columns: repeat(2, 1fr);

      @media (max-width: 1200px) {
        grid-template-columns: repeat(2, 1fr);
      }
      @media (max-width: 700px) {
        grid-template-columns: 1fr;
      }
    }
  }
</style>


