---
import { type CollectionEntry } from 'astro:content';
import { Picture } from 'astro:assets';

type Props = { project: CollectionEntry<'projects'>; class?: string; headingLevel?: 'h2' | 'h3' };

const { project, headingLevel = 'h2' } = Astro.props;
const { title, description, tags, link, cover } = project.data;
const TitleTag = headingLevel;
---

<a href={`/projects/${project.slug}/`} aria-label={title} class="project">
  <div class="project__image-container">
    {cover && (
      <Picture
        src={cover}
        alt={title}
        width={1280}
        height={720}
        formats={['avif', 'webp']}
        fallbackFormat="png"
        class="project__image"
      />
    )}
  </div>
  <div class="project__content">
    <TitleTag class="project__title">
      {title}
    </TitleTag>
    <p class="project__text">{description}</p>
  </div>
</a>

<style lang="scss">
  .project {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-16);
    text-decoration: none;
    color: inherit;

    &__content {
      display: flex;
      flex-direction: column;
      padding-right: var(--space-16);
    }

    &__title {
      margin-top: 0;
      margin-bottom: var(--space-12);
    }

    &__text {
      color: var(--color-text-secondary);
      font-size: var(--font-size-16);
      line-height: 140%;
    }

    &__image-container {
      overflow: hidden;
      aspect-ratio: 16/9;
      background-color: var(--color-bg-raised);
      border-radius: var(--radius-s);
    }

    &__image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 1s ease-in-out;
      display: block;
      border-radius: var(--radius-image);
    }

    &:hover .project__image {
      transform: scale(1.03);
    }
  }
</style>


